name: Branch Protection Helper

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  branch-protection-check:
    name: Check Branch Protection Status
    runs-on: ubuntu-latest
    steps:
      - name: Branch protection reminder
        run: |
          echo "üõ°Ô∏è BRANCH PROTECTION SETUP REQUIRED"
          echo ""
          echo "Please enable branch protection for the main branch:"
          echo "üëâ https://github.com/${{ github.repository }}/settings/branches"
          echo ""
          echo "‚úÖ Required Settings:"
          echo "   ‚Ä¢ Require a pull request before merging"
          echo "   ‚Ä¢ Require approvals (minimum 1)"
          echo "   ‚Ä¢ Require status checks to pass before merging"
          echo "   ‚Ä¢ Require branches to be up to date before merging"
          echo "   ‚Ä¢ Include administrators"
          echo "   ‚Ä¢ Restrict pushes to matching branches"
          echo ""
          echo "üîç Status Checks to Require:"
          echo "   ‚Ä¢ security-scan"
          echo "   ‚Ä¢ test (18.x)"
          echo "   ‚Ä¢ test (20.x)"
          echo "   ‚Ä¢ build"
          echo ""
          echo "‚ö° This ensures production-grade security for SovereigntyOS!"
          
      - name: Check if protection seems enabled
        run: |
          echo "üîê Checking current branch protection status..."
          if [ "${{ github.event_name }}" = "push" ] && [ "${{ github.ref }}" = "refs/heads/main" ]; then
            echo "‚ö†Ô∏è  Direct push to main detected!"
            echo "   Branch protection may not be fully configured."
            echo "   Please visit: https://github.com/${{ github.repository }}/settings/branches"
          else
            echo "‚úÖ Good! This workflow was triggered properly."
          fi